encryptionsalt: v1:itJsl9JCy1I=:v1:ajExxvENfHnbsAvV:D2rLCotVtzKi3D6r17l+7b27Ovtd4w==
config:
  sandbox:name: sandbox
  stack:data:
    vpcs:
    - createNatGateway: true
      createRouteTables: true
      data:
        cidrBlock: 10.200.0.0/16
        enableDnsHostnames: true
        enableDnsSupport: true
      name: sandbox
      region: us-east-1
      subnets:
      - availabilityZone: us-east-1a
        cidrBlock: 10.200.0.0/19
        tags:
          type: private
        type: private
      - availabilityZone: us-east-1b
        cidrBlock: 10.200.32.0/19
        tags:
          type: private
        type: private
      - availabilityZone: us-east-1c
        cidrBlock: 10.200.64.0/19
        tags:
          type: private
        type: private
      - availabilityZone: us-east-1a
        cidrBlock: 10.200.96.0/19
        tags:
          type: public
        type: public
      - availabilityZone: us-east-1b
        cidrBlock: 10.200.128.0/19
        tags:
          type: public
        type: public
      - availabilityZone: us-east-1c
        cidrBlock: 10.200.160.0/19
        tags:
          type: public
        type: public
    auroraCommon:
      cluster:
        dbClusterParameterGroup:
          create: true
          family: aurora-postgresql13
          name: aurora-cluster
        tags:
          environment: sandbox
      instance:
        dbParameterGroup:
          create: true
          family: aurora-postgresql13
          name: aurora-instance
      subnetGroups:
      - create: true
        name: aurora
        region: us-east-1
        subnetIds:
        - 
    auroraDefaults:
      cluster:
        allowMajorVersionUpgrade: true
        availabilityZones:
        - us-east-1a
        - us-east-1b
        - us-east-1c
        backupRetentionPeriod: 30
        dbSubnetGroupName: aurora
        enabledCloudwatchLogsExports:
        - postgresql
        engine: aurora-postgresql
        engineVersion: "13.4" #13.6 to convert to serverless
        # serverlessV2ScalingConfiguration:
        #   maxCapacity: 16
        #   minCapacity: 02
        skipFinalSnapshot: true
        storageEncrypted: true
        vpcSecurityGroup:
          create: true
          egress:
          - cidrBlocks:
            - 0.0.0.0/0
            fromPort: 5432
            protocol: All
            toPort: 5432
          ingress:
          - cidrBlocks:
            - 0.0.0.0/0
            fromPort: 5432
            protocol: TCP
            toPort: 5432
          - fromPort: 0
            protocol: TCP
            self: true
            toPort: 65535
          vpcId: vpc-0c865c7c03363d5c3
      instance:
        autoMinorVersionUpgrade: true
        class: db.t3.medium  #db.serverless
        count: 1
        # monitoringInterval: 30
        # monitoringRoleArn: arn:aws:iam::768334183534:role/rds-monitoring-role
        performanceInsightsEnabled: true
        publiclyAccessible: false
    clusters:
      sandbox-server:
        dbConfig:
          databaseName: postgres
          masterPassword: password
          masterUsername: postgres
          secret:
            rds:
              create: true
              engine: postgres
        name: sandbox
        region: us-east-1
  stack:providers:
    aws:
    - name: aws-us-east-1-provider
      region: us-east-1
